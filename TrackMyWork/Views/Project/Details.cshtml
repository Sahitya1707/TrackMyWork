@model TrackMyWork.Models.Project

@{
    ViewData["Title"] = Model.Title;
}

<div class="bg-gray-100 container mx-auto my-[1rem] max-w-4xl rounded-lg p-6 shadow-lg">
    <div class="flex items-center justify-between">

        <h1 class="mb-4 text-3xl font-extrabold capitalize">@Model.Title</h1>
        <p class="font-bold text-Secondary">#@Model.ProjectId</p>

    </div>

    <p class="mb-4 text-lg">Description: <span class="">@Model.Description</span></p>

    <div class="grid-cols-2 mb-6 grid gap-4">
        <p class="text-base">Start Date: <span class="text-[gray]">@Model.StartDate.ToShortDateString()</span></p>
        <p class="text-base">Deadline: <span class="text-[gray]">@Model.DeadlineDate.ToShortDateString()</span></p>
        <p class="text-base">Status:
            @if (Model.Status == 1)
            {
                <span class="font-semibold text-[blue]">Active</span>
            }
            else if (Model.Status == 2)
            {
                <span class="font-semibold text-[green]">Hold</span>
            }
            else if (Model.Status == 3)
            {
                <span class="font-semibold text-[grey]">Completed</span>
            }
            
            
            
          
        <p class="text-base">
            Urgency:
            @if (Model.Urgency == 1)
            {
                <span class="px-2 py-1 font-semibold text-[red]">High</span>
            }
            else if (Model.Urgency == 2)
            {
                <span class="px-2 py-1 font-semibold text-[blue]">Medium</span>
            }
            else
            {
                <span class="px-2 py-1 font-semibold text-[yellow]">Low</span>
            }
        </p>
    </div>

    @* Message Section *@
    <div class="bg-white mt-8 rounded-lg p-6 shadow-md">
        <h2 class="text-gray-800 mb-4 text-2xl font-bold">Messages</h2>

        <form method="post" asp-action="SendMessage">
            <textarea name="comment" class="h-24 w-full rounded-lg border border-[gray] p-3 focus:outline-none focus:ring-2 focus:ring-Primary" placeholder="Leave a message"></textarea>
            <button type="submit" class="text-white border-2 mt-3 w-full rounded-lg border-solid border-ColorBlack bg-Primary py-2 font-semibold transition duration-300 hover:bg-ColorWhite">Submit Message</button>
        </form>

        
      
            <!--trying to make it as accordian-->
            <button id="accordian" class="text-gray-700 mt-6 w-[100%] rounded bg-[#eee] p-[1rem] text-xl font-semibold shadow-lg hover:bg-[#ccc]">All Messages</button>
        
            <div class="display-hidden" id="panel">

                @if (Model.Messages != null && Model.Messages.Any())
                {
                    @foreach (var message in Model.Messages.OrderByDescending(m => m.SentDate))
                    {
                        <div class="bg-white mb-4 rounded p-4 shadow">
                        <p class="font-semibold">@message.Content</p>
                            <p class="">@message.SenderMail</p>
                           
                            <p class="text-gray-500 text-xs">@message.SentDate</p>
                        </div>
                    }
                }
                else
                {
                    <p class="rounded p-2 shadow">No messages for this project.</p>
                }
            </div>
        </div>
    </div>
    <div class="mt-2 text-right">
        <a href="@Url.Action("Index")" class="border-2 mt-4 rounded-md border-solid px-4 py-2 text-ColorBlack shadow transition duration-300 hover:bg-Secondary hover:text-ColorWhite hover:border-2 hover:border-solid hover:border-ColorBlack">Back to Projects</a>
   
</div>